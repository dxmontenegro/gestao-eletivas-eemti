<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sistema Escolar</title>

  <link rel="stylesheet" href="style.css" />

  <!-- ========================================= -->
  <!-- üî• FIREBASE SDKs (Firestore + App) -->
  <!-- ========================================= -->

  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js"></script>

  <script>
    // üî• Configura√ß√£o do Firebase ‚Äî SUA CONFIGURA√á√ÉO
    const firebaseConfig = {
      apiKey: "AIzaSyCXZbF9moR3N7eajKdXTGx9NyRN7mcJVIs",
      authDomain: "escola-eletivas.firebaseapp.com",
      projectId: "escola-eletivas",
      storageBucket: "escola-eletivas.firebasestorage.app",
      messagingSenderId: "824083879774",
      appId: "1:824083879774:web:219e9a0f025bd86bca21cf"
    };

    // Inicializa Firebase
    firebase.initializeApp(firebaseConfig);

    // Inicializa Firestore e deixa global
    const db = firebase.firestore();
  </script>

</head>

<body>
  <div id="login-screen">
    <h2>Login</h2>
    <form id="login-form">
      <label>Usu√°rio:</label>
      <input type="text" id="username" required />
      <label>Senha:</label>
      <input type="password" id="password" required />
      <button type="submit" class="btn">Entrar</button>
      <p id="login-message"></p>
    </form>
  </div>

  <div id="main-system" style="display: none;">
    <nav>
      <button class="tab-button active" data-tab="aluno-tab" onclick="showTab('aluno-tab')">Aluno</button>
      <button class="tab-button" data-tab="professor-tab" onclick="showTab('professor-tab')">Professor</button>
      <button class="tab-button" data-tab="eletiva-tab" onclick="showTab('eletiva-tab')">Eletiva</button>
      <button class="tab-button" data-tab="vinculo-tab" onclick="showTab('vinculo-tab')">V√≠nculo</button>
      <button class="tab-button" data-tab="registro-tab" onclick="showTab('registro-tab')">Registro</button>
      <button class="tab-button" data-tab="mapa-eletiva-tab" onclick="showTab('mapa-eletiva-tab')">Mapa / Notas</button>
    </nav>

    <!-- ABA ALUNO -->
    <div id="aluno-tab" class="tab-content active">
      <h2>Cadastro de Aluno</h2>
      <form id="form-aluno">
        <label>Nome Completo:</label>
        <input type="text" name="nome" required />

        <label>Turma de Origem:</label>
        <input type="text" name="turma" required />

        <button type="submit" class="btn">Salvar</button>
      </form>
      <p id="aluno-message"></p>
    </div>

    <!-- ABA PROFESSOR -->
    <div id="professor-tab" class="tab-content">
      <h2>Cadastro de Professor</h2>
      <form id="form-professor">
        <label>Nome Completo:</label>
        <input type="text" name="nome" required />

        <button type="submit" class="btn">Salvar</button>
      </form>
      <p id="professor-message"></p>
    </div>

    <!-- ABA ELETIVA -->
    <div id="eletiva-tab" class="tab-content">
      <h2>Cadastro de Eletiva</h2>
      <form id="form-eletiva">
        <label>Nome da Eletiva:</label>
        <input type="text" name="nome" required />

        <label>Vagas M√°ximas:</label>
        <input type="number" name="vagas" required />

        <button type="submit" class="btn">Salvar</button>
      </form>
      <p id="eletiva-message"></p>
    </div>

    <!-- ABA V√çNCULO -->
    <div id="vinculo-tab" class="tab-content">
      <h2>V√≠nculo Professor ‚Üí Eletiva</h2>
      <form id="form-vincular-professor">
        <label>Professor:</label>
        <select id="vinculo-professor" name="professor"></select>

        <label>Eletiva:</label>
        <select id="vinculo-eletiva" name="eletiva"></select>

        <button type="submit" class="btn">Salvar</button>
      </form>
      <p id="vinculo-professor-message"></p>
    </div>

    <!-- ABA REGISTRO -->
    <div id="registro-tab" class="tab-content">
      <h2>Registrar Aluno na Eletiva</h2>
      <form id="form-registrar-aluno">
        <label>Matr√≠cula:</label>
        <input type="text" name="matricula" required />

        <label>Eletiva:</label>
        <select id="registro-eletiva" name="eletiva"></select>

        <button type="submit" class="btn">Registrar</button>
      </form>
      <p id="registro-aluno-message"></p>
    </div>

    <!-- ABA MAPA -->
    <div id="mapa-eletiva-tab" class="tab-content">
      <h2>Mapa de Alunos da Eletiva</h2>

      <!-- ‚ö†Ô∏è AQUI FICAVA PEQUENO ‚Äî AGORA CORRIGIDO -->
      <div class="row" style="flex-wrap: wrap; gap: 12px;">
        <label for="mapa-eletiva-select" style="min-width: 140px;">Selecione a Eletiva</label>
        <select id="mapa-eletiva-select" style="flex: 1; min-width: 220px;"></select>

        <button id="btn-ver-mapa" class="btn small">Ver Mapa</button>
        <button id="btn-gerar-pdf" class="btn small">Gerar PDF</button>
      </div>

      <p id="mapa-message"></p>

      <table id="mapa-alunos-table">
        <thead>
          <tr>
            <th>Matr√≠cula</th>
            <th>Nome</th>
            <th>Turma</th>
            <th>Professor</th>
            <th></th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>

  </div>

  <!-- SEU SCRIPT PRINCIPAL -->
  <script src="script.js"></script>

</body>
</html>

